{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","_setItem","_setItem2","_pushItem","_pushItem2","_addItem","_addItem2","_mulItem","_mulItem2","_loadItem","_loadItem2","_replaceItem","_replaceItem2","_invertItem","_invertItem2","_subItem","_subItem2","ITEM_DISPLAY_ORDER","OPERAND_COLORS","Inventory","_Phaser$Group","game","stack","player","this","_this","getPrototypeOf","items","item_set","item_push","values","positionValue","item_add","item_sub","item_mul","item_load","item_replace","item_invert","add","setupDescriptionBox","selectedItem","resetItems","onItemChanged","Phaser","Signal","flashing","_this2","operandTweens","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_loop","text","tween","to","alpha","Easing","Linear","None","yoyo","onComplete","addOnce","push","_iterator","operandTexts","Symbol","iterator","next","done","err","return","descriptionBox","Group","x","TILE_WIDTH","y","instructionNameText","BitmapText","operandText","tint","itemName","reset","name","count","setTo","item","getItemByIndex","used","use","updateDesciptionText","errorFlash","nextItem","button","old_item","select","dispatch","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","stop","instructionName","numCharacters","operandName","operands","index","itemKey","maxCount","isItemAvailable","selectItem","selectedItemIndex","parseInt","_i","_i2","../items/addItem","../items/invertItem","../items/loadItem","../items/mulItem","../items/pushItem","../items/replaceItem","../items/setItem","../items/subItem","2","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","_tileSprite","_tileSprite2","Laser","_TileSprite","frame","setupAnimation","beams","objectValues","on","set","watch","_this3","states","directions","forEach","state","direction","animation","animations","play","tileMap","entities","x_dest","y_dest","targetTile","getTile","properties","collidable","ent","tileX","tileY","clearBeams","x_direction","y_direction","check_next","canMove","addBeam","beam","destroy","tileXDest","tileYDest","beamTileX","beamTileY","beamXTile","beamYTile","TILE_HEIGHT","addChild","./tileSprite","3","Memory","width","height","memory","j","callbacks","hexCoords","Math","floor","cell","v1","v2","callback","MemoryOffset","MemoryCell","baseY","baseX","_len","arguments","args","Array","_key","apply","concat","replaceAll","watchAll","_len2","_key2","4","Player","anchor","moving","lastDirection","DIRECTIONS","position","getIndirect","moveX","moveY","destX","destY","move_constants","start","end","suffix","zeroPad","frameRate","loop","standing_constants","d","addFrames","assign","prefix","settings","frameNames","Animation","generateFrameNames","5","Stack","stackHeight","stackWidth","inventory","pointerY","pointerX","operandGraphics","pointerGraphics","graphics","beginFill","drawPolygon","endFill","updatePointer","graphic","Graphics","lineStyle","drawRect","offsetCoords","getOffsetCoords","offsetX","offsetY","drawOperandMarkers","currentItem","xPos","yPos","numOperands","_getOffsetCoords","offset","6","TileSprite","_Phaser$Sprite","place","Sprite","7","toHex","high","low","COORDINATES","Tiles","tileLayer","overlayText","setupOverlayText","updateOverlayText","setupOriginalTiles","setupDefaultTileIndices","tile","onTileChanged","originalTiles","bitmapText","defaultTileIndices","tilesetIndex","getTilesetIndex","tileset","tilesets","valueFirsts","tileIndex","tileProperties","_value","newTileIndex","replace","_loop2","overlay","currentAlpha","fadeOut","fadeIn","chain","highlight","8","toString","toUpperCase","ObjectValues","Values","valuesHeight","valuesWidth","pointer","getCurrentState","levelIndex","createObjectValues","children","getAt","_Phaser$Group2","groupName","createValue","label","9","_defineProperty","_window$DIRECTIONS","_initState","_initState2","_levelState","_levelState2","_textState","_textState2","_creditsState","_creditsState2","_controlsState","_controlsState2","_levelSelectState","_levelSelectState2","window","ASSETS","monospaceFontData","monospaceFontImage","slothData","slothImage","tileMapImage","objectsMapImage","getLevelData","GLYPH_NAMES","Keyboard","UP","RIGHT","DOWN","LEFT","LEVELS","LEVEL_TEXT","Game","AUTO","./states/controlsState","./states/creditsState","./states/initState","./states/levelSelectState","./states/levelState","./states/textState","10","_item","_item2","AddItem","_Item","opA","pop","opB","./item","11","InvertItem","12","ARC_RADIUS","ARC_CENTRE_X","ARC_CENTRE_Y","ARC_SELECTED_COLOR","ARC_DESELECTED_COLOR","Item","selected","usedGraphics","drawCircle","unusedGraphics","drawUnusedArc","description","from","clear","arc","math","degToRad","visible","_activate","13","LoadItem","result","14","MulItem","15","PushItem","playerPositionValue","16","ReplaceItem","17","SetItem","addr","setIndirect","18","SubItem","19","ControlsState","_Phaser$State","menuItems","onEnter","enterKey","input","keyboard","addKey","ENTER","onDown","mKey","M","escapeKey","ESC","State","20","CreditsState","21","InitState","renderer","renderSession","roundPixels","Canvas","setImageRenderingCrisp","canvas","stage","backgroundColor","scale","scaleMode","ScaleManager","USER_SCALE","setUserScale","selectedMenuItem","localStorage","getItem","setItem","load","atlas","Loader","TEXTURE_ATLAS_JSON_HASH","bitmapFont","spritesheet","image","audio","music","currentLevel","startText","updateItems","onUp","upKey","wKey","W","downKey","sKey","S","22","LevelSelectState","onLeft","onRight","leftKey","aKey","A","rightKey","dKey","D","23","matchesSpec","spec","k","_inventory","_inventory2","_memory","_memory2","_tiles","_tiles2","_player","_player2","_stack","_stack2","_values","_laser","_laser2","LevelState","tilemap","Tilemap","TILED_JSON","keyQueue","setupKeyQueue","levelGroup","group","coordinateText","setupBorderText","setupTileMap","tiles","setupTiles","objectGroup","createSingleObjectSprite","lasers","createObjectSprites","setPlayerCoordinateTint","populateStack","setupInventory","setupItemKeys","bind","selectFirstItem","resetKey","R","event","metaKey","location","reload","paused","checkPlayerTile","movePlayer","updateBeams","number_keys","use_key","useSelectedItem","displayFailMessage","previousItemKey","Q","previousItem","nextItemKey","E","_this4","map","shiftKey","SHIFT","setHighlight","_this5","glyph","startsWith","glyph_value","tilesInMap","getTilesByType","addTilesetImage","createLayer","resizeWorld","type","addItem","_this6","stackValues","split","reverse","stackValue","goToLevel","_text","_this7","cursors","createCursorKeys","wasd","up","down","left","right","keySet","cursor","indexOf","keyCode","splice","options","objects","JSON","stringify","_this8","sprite","gid","existing","registerValues","currentKey","getTargetTile","setDirection","move","entity","getAdjacentTile","mapLayerIndex","getLayerIndex","checkMoving","wouldCollide","_this9","skipIntro","title","centerX","centerY","titleWidth","messageGroup","messageBox","messageTitleText","../entities/inventory","../entities/laser","../entities/memory","../entities/player","../entities/stack","../entities/tileSprite","../entities/tiles","../entities/values","24","TEXT_START_X","TEXT_START_Y","TextState","currentLevelString","gameText","currentPage","shownText","animating","animatingText","tweens","animatePage","setupKeyboard","active","pageText","splitText","line","ellipsisText","ellipsisTween"],"mappings":"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","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _setItem = require('../items/setItem');\n\nvar _setItem2 = _interopRequireDefault(_setItem);\n\nvar _pushItem = require('../items/pushItem');\n\nvar _pushItem2 = _interopRequireDefault(_pushItem);\n\nvar _addItem = require('../items/addItem');\n\nvar _addItem2 = _interopRequireDefault(_addItem);\n\nvar _mulItem = require('../items/mulItem');\n\nvar _mulItem2 = _interopRequireDefault(_mulItem);\n\nvar _loadItem = require('../items/loadItem');\n\nvar _loadItem2 = _interopRequireDefault(_loadItem);\n\nvar _replaceItem = require('../items/replaceItem');\n\nvar _replaceItem2 = _interopRequireDefault(_replaceItem);\n\nvar _invertItem = require('../items/invertItem');\n\nvar _invertItem2 = _interopRequireDefault(_invertItem);\n\nvar _subItem = require('../items/subItem');\n\nvar _subItem2 = _interopRequireDefault(_subItem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ITEM_DISPLAY_ORDER = ['item_set', 'item_push', 'item_add', 'item_sub', 'item_mul', 'item_load', 'item_replace', 'item_invert'];\n\nvar OPERAND_COLORS = [0xD63AD4, 0x9AD63A];\n\nvar Inventory = function (_Phaser$Group) {\n  _inherits(Inventory, _Phaser$Group);\n\n  function Inventory(game, stack, player) {\n    _classCallCheck(this, Inventory);\n\n    var _this = _possibleConstructorReturn(this, (Inventory.__proto__ || Object.getPrototypeOf(Inventory)).call(this, game, null, 'Inventory'));\n\n    _this.items = {\n      'item_set': new _setItem2.default(_this.game, stack),\n      'item_push': new _pushItem2.default(_this.game, stack, player.values.positionValue),\n      'item_add': new _addItem2.default(_this.game, stack),\n      'item_sub': new _subItem2.default(_this.game, stack),\n      'item_mul': new _mulItem2.default(_this.game, stack),\n      'item_load': new _loadItem2.default(_this.game, stack),\n      'item_replace': new _replaceItem2.default(_this.game, stack),\n      'item_invert': new _invertItem2.default(_this.game, stack)\n    };\n\n    for (var key in _this.items) {\n      _this.add(_this.items[key]);\n    }\n\n    _this.setupDescriptionBox();\n\n    _this.selectedItem = 0;\n\n    _this.resetItems();\n\n    _this.onItemChanged = new Phaser.Signal();\n    _this.flashing = false;\n    return _this;\n  }\n\n  _createClass(Inventory, [{\n    key: 'errorFlash',\n    value: function errorFlash() {\n      var _this2 = this;\n\n      if (this.flashing) {\n        return;\n      }\n\n      this.flashing = true;\n      this.operandTweens = [];\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var text = _step.value;\n\n          var tween = _this2.game.add.tween(text);\n\n          tween.to({ alpha: 0 }, 150, Phaser.Easing.Linear.None, true, 0, 1).yoyo(true).onComplete.addOnce(function () {\n            _this2.flashing = false;\n            text.alpha = 1;\n          });\n\n          _this2.operandTweens.push(tween);\n        };\n\n        for (var _iterator = this.operandTexts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          _loop();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'setupDescriptionBox',\n    value: function setupDescriptionBox() {\n      this.descriptionBox = new Phaser.Group(this.game, this, 'descriptionBox');\n      this.descriptionBox.x = (ITEM_DISPLAY_ORDER.length + 1) * TILE_WIDTH;\n      this.descriptionBox.y = 5;\n\n      this.instructionNameText = new Phaser.BitmapText(this.game, 0, 0, 'monospace', '', 9);\n      this.descriptionBox.add(this.instructionNameText);\n\n      this.operandTexts = [];\n      this.operandTweens = [];\n      for (var i = 0; i < 2; i++) {\n        var operandText = new Phaser.BitmapText(this.game, 0, 0, 'monospace', '', 9);\n        operandText.tint = OPERAND_COLORS[i];\n\n        this.descriptionBox.add(operandText);\n        this.operandTexts.push(operandText);\n      }\n    }\n  }, {\n    key: 'resetItems',\n    value: function resetItems() {\n      for (var i in ITEM_DISPLAY_ORDER) {\n        var itemName = ITEM_DISPLAY_ORDER[i];\n        this.items[itemName].x = i * TILE_WIDTH;\n        this.items[itemName].reset();\n      }\n    }\n  }, {\n    key: 'addItem',\n    value: function addItem(name, count) {\n      this.items[name].setTo(count);\n    }\n  }, {\n    key: 'useSelectedItem',\n    value: function useSelectedItem() {\n      var item = this.getItemByIndex(this.selectedItem);\n      if (item.count > 0) {\n        var used = item.use();\n        this.updateDesciptionText(item);\n        if (!used) this.errorFlash();\n      }\n\n      if (item.count === 0) {\n        this.nextItem();\n      }\n    }\n  }, {\n    key: 'selectItem',\n    value: function selectItem(button) {\n      if (button >= ITEM_DISPLAY_ORDER.length) {\n        return false;\n      }\n\n      var item = this.getItemByIndex(button);\n\n      if (item.count > 0) {\n        var old_item = this.getItemByIndex(this.selectedItem);\n\n        old_item.select(false);\n        item.select(true);\n\n        this.selectedItem = button;\n        this.updateDesciptionText(item);\n\n        this.onItemChanged.dispatch(item);\n        if (this.flashing) {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = this.operandTweens[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var tween = _step2.value;\n\n              tween.stop(true);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: 'updateDesciptionText',\n    value: function updateDesciptionText(item) {\n      this.instructionNameText.text = item.count + 'x ' + item.instructionName;\n\n      var numCharacters = this.instructionNameText.text.length + 1;\n\n      for (var i = 0; i < 2; i++) {\n        var operandName = item.operands[i];\n        if (operandName) {\n          this.operandTexts[i].text = operandName;\n          this.operandTexts[i].x = numCharacters * 6;\n          numCharacters += this.operandTexts[i].text.length + 1;\n        } else {\n          this.operandTexts[i].text = '';\n        }\n      }\n    }\n  }, {\n    key: 'getItemByIndex',\n    value: function getItemByIndex(index) {\n      var itemKey = ITEM_DISPLAY_ORDER[index];\n      return this.items[itemKey];\n    }\n  }, {\n    key: 'isItemAvailable',\n    value: function isItemAvailable(index) {\n      var item = this.items[ITEM_DISPLAY_ORDER[index]];\n      return item.maxCount > 0 && item.count > 0;\n    }\n  }, {\n    key: 'selectFirstItem',\n    value: function selectFirstItem() {\n      for (var i in ITEM_DISPLAY_ORDER) {\n        if (this.isItemAvailable(i)) {\n          this.selectItem(i);\n          break;\n        }\n      }\n    }\n  }, {\n    key: 'nextItem',\n    value: function nextItem() {\n      var selectedItemIndex = parseInt(this.selectedItem);\n      for (var i = selectedItemIndex + 1; i < ITEM_DISPLAY_ORDER.length; i++) {\n        if (this.isItemAvailable(i)) {\n          this.selectItem(i);\n          return;\n        }\n      }\n\n      for (var _i = 0; _i < selectedItemIndex; _i++) {\n        if (this.isItemAvailable(_i)) {\n          this.selectItem(_i);\n          return;\n        }\n      }\n    }\n  }, {\n    key: 'previousItem',\n    value: function previousItem() {\n      var selectedItemIndex = parseInt(this.selectedItem);\n      for (var i = selectedItemIndex - 1; i >= 0; i--) {\n        if (this.isItemAvailable(i)) {\n          this.selectItem(i);\n          return;\n        }\n      }\n\n      for (var _i2 = ITEM_DISPLAY_ORDER.length - 1; _i2 > selectedItemIndex; _i2--) {\n        if (this.isItemAvailable(_i2)) {\n          this.selectItem(_i2);\n          return;\n        }\n      }\n    }\n  }]);\n\n  return Inventory;\n}(Phaser.Group);\n\nexports.default = Inventory;\n\n},{\"../items/addItem\":10,\"../items/invertItem\":11,\"../items/loadItem\":13,\"../items/mulItem\":14,\"../items/pushItem\":15,\"../items/replaceItem\":16,\"../items/setItem\":17,\"../items/subItem\":18}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _tileSprite = require('./tileSprite');\n\nvar _tileSprite2 = _interopRequireDefault(_tileSprite);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Laser = function (_TileSprite) {\n  _inherits(Laser, _TileSprite);\n\n  function Laser(game, x, y, key, frame) {\n    _classCallCheck(this, Laser);\n\n    var _this = _possibleConstructorReturn(this, (Laser.__proto__ || Object.getPrototypeOf(Laser)).call(this, game, x, y, key, frame));\n\n    _this.setupAnimation();\n\n    _this.beams = [];\n    return _this;\n  }\n\n  _createClass(Laser, [{\n    key: 'registerValues',\n    value: function registerValues(objectValues) {\n      var _this2 = this;\n\n      _get(Laser.prototype.__proto__ || Object.getPrototypeOf(Laser.prototype), 'registerValues', this).call(this, objectValues);\n\n      this.values.on = objectValues.next(0x00ff00);\n      this.values.on.set(this.on);\n      this.values.on.watch(function (value) {\n        _this2.on = value > 0;\n      });\n    }\n  }, {\n    key: 'setupAnimation',\n    value: function setupAnimation() {\n      var _this3 = this;\n\n      var states = ['on', 'off'];\n      var directions = ['left', 'right', 'down', 'up'];\n\n      states.forEach(function (state) {\n        directions.forEach(function (direction) {\n          var animation = state + '-' + direction;\n          _this3.animations.add(animation, ['laser-' + animation], 0, false);\n        });\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var state = this.on ? 'on' : 'off';\n      this.play(state + '-' + this.direction);\n    }\n  }, {\n    key: 'canMove',\n    value: function canMove(tileMap, entities, x_dest, y_dest) {\n      var targetTile = tileMap.getTile(x_dest, y_dest, 'tiles');\n\n      if (!targetTile || targetTile.properties.collidable) {\n        return false;\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = entities[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var ent = _step.value;\n\n          if (ent.collidable && ent.tileX === x_dest && ent.tileY === y_dest) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: 'updateBeams',\n    value: function updateBeams(tileMap, entities) {\n      this.clearBeams();\n\n      if (this.on) {\n        var x_direction = 0;\n        var y_direction = 0;\n\n        switch (this.direction) {\n          case 'left':\n            x_direction = -1;\n            break;\n          case 'right':\n            x_direction = 1;\n            break;\n          case 'down':\n            y_direction = 1;\n            break;\n          case 'up':\n            y_direction = -1;\n            break;\n        }\n\n        var check_next = true;\n        var x_dest = this.tileX;\n        var y_dest = this.tileY;\n\n        while (check_next) {\n          x_dest += x_direction;\n          y_dest += y_direction;\n\n          if (this.canMove(tileMap, entities, x_dest, y_dest)) {\n            this.addBeam(x_dest, y_dest);\n          } else {\n            check_next = false;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'clearBeams',\n    value: function clearBeams() {\n      this.beams.forEach(function (beam) {\n        beam.destroy();\n      });\n\n      this.beams = [];\n    }\n  }, {\n    key: 'wouldCollide',\n    value: function wouldCollide(tileXDest, tileYDest) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.beams[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var beam = _step2.value;\n\n          var beamTileX = this.tileX + beam.tileX;\n          var beamTileY = this.tileY + beam.tileY;\n\n          if (beamTileX === tileXDest && beamTileY === tileYDest) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return _get(Laser.prototype.__proto__ || Object.getPrototypeOf(Laser.prototype), 'wouldCollide', this).call(this, tileXDest, tileYDest);\n    }\n  }, {\n    key: 'addBeam',\n    value: function addBeam(x, y) {\n      var beamXTile = x - this.tileX;\n      var beamYTile = y - this.tileY;\n\n      var direction = this.direction === 'down' || this.direction === 'up' ? 'vertical' : 'horizontal';\n\n      var beam = new _tileSprite2.default(this.game, beamXTile * TILE_WIDTH, beamYTile * TILE_HEIGHT, 'sloth', 'laser-beam-' + direction);\n\n      this.addChild(beam);\n      this.beams.push(beam);\n    }\n  }]);\n\n  return Laser;\n}(_tileSprite2.default);\n\nexports.default = Laser;\n\n},{\"./tileSprite\":6}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Memory = function () {\n  function Memory(width, height) {\n    _classCallCheck(this, Memory);\n\n    this.width = width;\n    this.height = height;\n\n    this.memory = [];\n    for (var i = 0; i < this.height; i++) {\n      this.memory[i] = [];\n      for (var j = 0; j < this.width; j++) {\n        this.memory[i][j] = { value: 0, callbacks: [] };\n      }\n    }\n\n    this.callbacks = [];\n  }\n\n  _createClass(Memory, [{\n    key: 'get',\n    value: function get(y, x) {\n      return this.memory[y][x].value;\n    }\n  }, {\n    key: 'getIndirect',\n    value: function getIndirect(y, x) {\n      // Treat the value at (y, x) as a hex address of another cell, and return that value\n      var hexCoords = this.memory[y][x].value;\n      return this.get(Math.floor(hexCoords / 16), hexCoords % 16);\n    }\n  }, {\n    key: 'set',\n    value: function set(y, x, value) {\n      if (y > 11 || x > 15) {\n        var e = new Error('Out of bounds access');\n        e.name = 'OutOfBoundsError';\n        throw e;\n      }\n\n      var cell = this.memory[y][x];\n\n      if (value === cell.value) {\n        return;\n      }\n\n      cell.value = value;\n      for (var i = 0; i < cell.callbacks.length; i++) {\n        cell.callbacks[i](value);\n      }\n      for (var _i = 0; _i < this.callbacks.length; _i++) {\n        this.callbacks[_i](y, x, value);\n      }\n    }\n  }, {\n    key: 'setIndirect',\n    value: function setIndirect(y, x, value) {\n      if (y > 11 || x > 15) {\n        var e = new Error('Out of bounds access');\n        e.name = 'OutOfBoundsError';\n        throw e;\n      }\n\n      // Treat the value at (y, x) as a hex address of another cell, and set the value of that cell\n      var hexCoords = this.memory[y][x].value;\n      return this.set(Math.floor(hexCoords / 16), hexCoords % 16, value);\n    }\n  }, {\n    key: 'replaceAll',\n    value: function replaceAll(v1, v2) {\n      for (var y = 0; y < this.height; y++) {\n        for (var x = 0; x < this.width; x++) {\n          if (this.memory[y][x] === v1) {\n            this.set(y, x, v2);\n          }\n        }\n      }\n    }\n  }, {\n    key: 'watch',\n    value: function watch(y, x, callback) {\n      this.memory[y][x].callbacks.push(callback);\n    }\n  }, {\n    key: 'watchAll',\n    value: function watchAll(callback) {\n      this.callbacks.push(callback);\n    }\n  }, {\n    key: 'offset',\n    value: function offset(y, x) {\n      return new MemoryOffset(this, y, x);\n    }\n  }, {\n    key: 'cell',\n    value: function cell(y, x) {\n      return new MemoryCell(this, y, x);\n    }\n  }]);\n\n  return Memory;\n}();\n\nexports.default = Memory;\n\nvar MemoryOffset = function MemoryOffset(memory, baseY, baseX) {\n  var _this = this;\n\n  _classCallCheck(this, MemoryOffset);\n\n  ;['get', 'getIndirect', 'set', 'setIndirect', 'watch', 'offset', 'cell'].forEach(function (name) {\n    var target = memory[name];\n    _this[name] = function (y, x) {\n      for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      return target.apply(memory, [baseY + y, baseX + x].concat(args));\n    };\n  });\n\n  this.replaceAll = function () {\n    return memory.replaceAll.apply(memory, arguments);\n  };\n\n  this.watchAll = function (callback) {\n    return memory.watchAll(function (y, x, value) {\n      callback(y - baseY, x - baseX, value);\n    });\n  };\n};\n\nvar MemoryCell = function MemoryCell(memory, y, x) {\n  var _this2 = this;\n\n  _classCallCheck(this, MemoryCell);\n\n  ;['get', 'getIndirect', 'setIndirect', 'set', 'watch'].forEach(function (name) {\n    var target = memory[name];\n    _this2[name] = function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return target.apply(memory, [y, x].concat(args));\n    };\n  });\n};\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _tileSprite = require('./tileSprite');\n\nvar _tileSprite2 = _interopRequireDefault(_tileSprite);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Player = function (_TileSprite) {\n  _inherits(Player, _TileSprite);\n\n  function Player(game, x, y, key, frame) {\n    _classCallCheck(this, Player);\n\n    var _this = _possibleConstructorReturn(this, (Player.__proto__ || Object.getPrototypeOf(Player)).call(this, game, x, y, key, frame));\n\n    _this.anchor.y = 0.5;\n\n    _this.moving = false;\n    _this.lastDirection = null;\n\n    _this.setupAnimation();\n    return _this;\n  }\n\n  _createClass(Player, [{\n    key: 'update',\n    value: function update() {\n      if (this.lastDirection && !this.moving) {\n        this.animations.play('standing-' + DIRECTIONS[this.lastDirection]);\n        this.lastDirection = null;\n      }\n    }\n  }, {\n    key: 'registerValues',\n    value: function registerValues(objectValues) {\n      _get(Player.prototype.__proto__ || Object.getPrototypeOf(Player.prototype), 'registerValues', this).call(this, objectValues);\n\n      this.values.positionValue = objectValues.next();\n\n      this.values.positionValue.set(this.values.position.getIndirect());\n    }\n  }, {\n    key: 'setDirection',\n    value: function setDirection(direction) {\n      this.lastDirection = direction;\n    }\n  }, {\n    key: 'move',\n    value: function move(direction, moveX, moveY) {\n      var _this2 = this;\n\n      this.moving = true;\n\n      this.tileX += moveX;\n      this.tileY += moveY;\n\n      var destX = this.tileX * TILE_WIDTH;\n      var destY = this.tileY * TILE_HEIGHT;\n      this.values.position.set(this.hexCoords());\n\n      var animation = this.animations.play('move-' + DIRECTIONS[direction]);\n\n      if (!this.lastDirection) {\n        animation.next(1);\n      }\n\n      this.game.add.tween(this).to({ x: destX, y: destY }, 250, Phaser.Easing.Linear.None, true).onComplete.addOnce(function () {\n        _this2.moving = false;\n        _this2.lastDirection = direction;\n      });\n    }\n  }, {\n    key: 'setupAnimation',\n    value: function setupAnimation() {\n      var move_constants = {\n        start: 1,\n        end: 4,\n        suffix: '',\n        zeroPad: 2,\n        frameRate: 5,\n        loop: true\n      };\n\n      var standing_constants = {\n        start: 1,\n        end: 1,\n        suffix: '',\n        zeroPad: 2,\n        frameRate: 0,\n        loop: false\n      };\n\n      for (var d in DIRECTIONS) {\n        this.addFrames(Object.assign({ name: 'move-' + DIRECTIONS[d], prefix: 'sloth-' + DIRECTIONS[d] + '-' }, move_constants));\n\n        this.addFrames(Object.assign({ name: 'standing-' + DIRECTIONS[d], prefix: 'sloth-' + DIRECTIONS[d] + '-' }, standing_constants));\n      }\n    }\n  }, {\n    key: 'addFrames',\n    value: function addFrames(settings) {\n      var frameNames = Phaser.Animation.generateFrameNames(settings['prefix'], settings['start'], settings['end'], settings['suffix'], settings['zeroPad']);\n\n      this.animations.add(settings['name'], frameNames, settings['frameRate'], settings['loop']);\n    }\n  }]);\n\n  return Player;\n}(_tileSprite2.default);\n\nexports.default = Player;\n\n},{\"./tileSprite\":6}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OPERAND_COLORS = [0xD63AD4, 0x9AD63A];\n\nvar Stack = function (_Phaser$Group) {\n  _inherits(Stack, _Phaser$Group);\n\n  function Stack(game, memory, stackHeight, stackWidth, inventory) {\n    _classCallCheck(this, Stack);\n\n    var _this = _possibleConstructorReturn(this, (Stack.__proto__ || Object.getPrototypeOf(Stack)).call(this, game, null, 'Stack'));\n\n    _this.memory = memory;\n    _this.stackHeight = stackHeight;\n    _this.stackWidth = stackWidth;\n\n    _this.pointerY = stackHeight;\n    _this.pointerX = 0;\n    _this.count = 0;\n\n    _this.operandGraphics = [];\n\n    _this.pointerGraphics = _this.game.add.graphics(0, 0, _this);\n    _this.pointerGraphics.beginFill(0xffffff);\n    _this.pointerGraphics.drawPolygon([0, 0, 3, 3, -3, 3]);\n    _this.pointerGraphics.endFill();\n\n    _this.updatePointer();\n\n    for (var i = 0; i < 2; i++) {\n      var graphic = new Phaser.Graphics(game, 0, 0);\n      graphic.beginFill(0, 0);\n      graphic.lineStyle(1, OPERAND_COLORS[i], 1);\n      graphic.drawRect(0, 0, 13, 13);\n      graphic.endFill();\n      graphic.alpha = 0;\n\n      _this.operandGraphics.push(graphic);\n      _this.add(graphic);\n    }\n    return _this;\n  }\n\n  _createClass(Stack, [{\n    key: 'push',\n    value: function push(value) {\n      if (this.pointerY === 0 && this.pointerX === 0) {\n        throw new Error('Stack overflow');\n      }\n\n      var offsetCoords = this.getOffsetCoords(1);\n      this.pointerX = offsetCoords.offsetX;\n      this.pointerY = offsetCoords.offsetY;\n\n      this.memory.set(this.pointerY, this.pointerX, value);\n      this.count++;\n\n      this.drawOperandMarkers();\n      this.updatePointer();\n    }\n  }, {\n    key: 'pop',\n    value: function pop() {\n      if (this.pointerY === this.stackHeight && this.pointerX === 0) {\n        throw new Error('Stack underflow');\n      }\n\n      var value = this.memory.get(this.pointerY, this.pointerX);\n      this.memory.set(this.pointerY, this.pointerX, 0);\n\n      var offsetCoords = this.getOffsetCoords(-1);\n      this.pointerX = offsetCoords.offsetX;\n      this.pointerY = offsetCoords.offsetY;\n\n      this.count--;\n\n      this.drawOperandMarkers();\n      this.updatePointer();\n\n      return value;\n    }\n  }, {\n    key: 'onItemChanged',\n    value: function onItemChanged(item) {\n      this.currentItem = item;\n\n      this.drawOperandMarkers();\n    }\n  }, {\n    key: 'updatePointer',\n    value: function updatePointer() {\n      var xPos = this.pointerY === 12 ? 4 : this.pointerX;\n      var yPos = this.pointerY === 12 ? 12 : this.pointerY + 1;\n      this.game.add.tween(this.pointerGraphics).to({\n        x: xPos * 16,\n        y: yPos * 16 - 3\n      }, 150, Phaser.Easing.Linear.None, true);\n    }\n  }, {\n    key: 'drawOperandMarkers',\n    value: function drawOperandMarkers() {\n      if (!this.currentItem) {\n        return;\n      }\n\n      var numOperands = this.currentItem.operands.length;\n\n      for (var i in this.operandGraphics) {\n        var graphic = this.operandGraphics[i];\n\n        var _getOffsetCoords = this.getOffsetCoords(-i);\n\n        var offsetX = _getOffsetCoords.offsetX;\n        var offsetY = _getOffsetCoords.offsetY;\n\n\n        var destX = offsetX * 16 + 1;\n        var destY = offsetY * 16 + 1;\n\n        this.game.add.tween(this.operandGraphics[i]).to({ x: destX, y: destY }, 150, Phaser.Easing.Linear.None, true);\n\n        if (!this.currentItem || i >= numOperands || offsetY >= this.stackHeight || numOperands === 2 && i === 0 && offsetY === this.stackHeight - 1 && offsetX === this.stackWidth - 1) {\n          graphic.alpha = 0;\n        } else {\n          graphic.alpha = 1;\n        }\n      }\n    }\n  }, {\n    key: 'getOffsetCoords',\n    value: function getOffsetCoords(offset) {\n      var offsetX = this.pointerX;\n      var offsetY = this.pointerY;\n\n      if (offset > 0) {\n        while (offset > 0) {\n          offsetX--;\n          if (offsetX < 0) {\n            offsetY--;\n            offsetX = this.stackWidth - 1;\n          }\n\n          offset--;\n        }\n      } else {\n        while (offset < 0) {\n          offsetX++;\n          if (offsetX >= this.stackWidth) {\n            offsetY++;\n            offsetX = 0;\n          }\n\n          offset++;\n        }\n      }\n\n      return { offsetX: offsetX, offsetY: offsetY };\n    }\n  }]);\n\n  return Stack;\n}(Phaser.Group);\n\nexports.default = Stack;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TileSprite = function (_Phaser$Sprite) {\n  _inherits(TileSprite, _Phaser$Sprite);\n\n  function TileSprite(game, x, y, key, frame) {\n    _classCallCheck(this, TileSprite);\n\n    var _this = _possibleConstructorReturn(this, (TileSprite.__proto__ || Object.getPrototypeOf(TileSprite)).call(this, game, x, y, key, frame));\n\n    _this.tileX = Math.floor(x / TILE_WIDTH);\n    _this.tileY = Math.floor(y / TILE_HEIGHT);\n    return _this;\n  }\n\n  _createClass(TileSprite, [{\n    key: \"registerValues\",\n    value: function registerValues(objectValues) {\n      var _this2 = this;\n\n      this.values = {\n        position: objectValues.next(0xff0000)\n      };\n\n      this.values.position.set(this.hexCoords());\n      this.values.position.watch(function (hexCoords) {\n        try {\n          _this2.place(hexCoords % 16, Math.floor(hexCoords / 16));\n          _this2.values.positionValue.set(_this2.values.position.getIndirect());\n        } catch (e) {\n          // there's not enough time for this error to matter\n        }\n      });\n    }\n  }, {\n    key: \"place\",\n    value: function place(tileX, tileY) {\n      if (this.moving) {\n        return;\n      }\n\n      this.tileX = tileX;\n      this.tileY = tileY;\n      this.x = tileX * TILE_WIDTH;\n      this.y = tileY * TILE_HEIGHT;\n\n      this.values.position.set(this.hexCoords());\n    }\n  }, {\n    key: \"hexCoords\",\n    value: function hexCoords() {\n      return this.tileY * 16 + this.tileX;\n    }\n  }, {\n    key: \"wouldCollide\",\n    value: function wouldCollide(tileXDest, tileYDest) {\n      return this.collidable && this.tileX === tileXDest && this.tileY === tileYDest;\n    }\n  }]);\n\n  return TileSprite;\n}(Phaser.Sprite);\n\nexports.default = TileSprite;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar COORDINATES = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];\n\nvar Tiles = function (_Phaser$Group) {\n  _inherits(Tiles, _Phaser$Group);\n\n  function Tiles(game, parent, memory, tileMap, tileLayer) {\n    _classCallCheck(this, Tiles);\n\n    var _this = _possibleConstructorReturn(this, (Tiles.__proto__ || Object.getPrototypeOf(Tiles)).call(this, game, parent, 'tilesGroup'));\n\n    _this.memory = memory;\n    _this.tileMap = tileMap;\n    _this.tileLayer = tileLayer;\n\n    _this.overlayText = _this.setupOverlayText();\n    _this.updateOverlayText();\n\n    _this.setupOriginalTiles();\n    _this.setupDefaultTileIndices();\n\n    _this.alpha = 0.2;\n\n    for (var i = 0; i < 12; i++) {\n      for (var j = 0; j < 12; j++) {\n        var tile = tileMap.getTile(i, j, tileLayer);\n        memory.set(j, i, tile.properties.value);\n      }\n    }\n\n    memory.watchAll(function (y, x, value) {\n      if (y < 12 && x < 12) {\n        _this.onTileChanged(y, x, value);\n      }\n    });\n    return _this;\n  }\n\n  _createClass(Tiles, [{\n    key: 'setupOriginalTiles',\n    value: function setupOriginalTiles() {\n      this.originalTiles = [];\n\n      for (var i = 0; i < 12; i++) {\n        this.originalTiles.push([]);\n        for (var j = 0; j < 12; j++) {\n          var tile = this.tileMap.getTile(i, j, this.tileLayer);\n          this.originalTiles[i][j] = {\n            index: tile.index - 1,\n            value: tile.properties.value\n          };\n        }\n      }\n    }\n  }, {\n    key: 'setupOverlayText',\n    value: function setupOverlayText() {\n      var overlayText = [];\n\n      for (var i = 0; i < 12; i++) {\n        overlayText.push([]);\n\n        for (var j = 0; j < 12; j++) {\n          var text = this.game.add.bitmapText(3 + i * 16, 4 + j * 16, 'monospace', '', 9, this);\n          overlayText[i][j] = text;\n        }\n      }\n\n      return overlayText;\n    }\n  }, {\n    key: 'setupDefaultTileIndices',\n    value: function setupDefaultTileIndices() {\n      this.defaultTileIndices = {};\n\n      var tilesetIndex = this.tileMap.getTilesetIndex('tiles');\n      var tileset = this.tileMap.tilesets[tilesetIndex];\n\n      var valueFirsts = {};\n\n      for (var tileIndex in tileset.tileProperties) {\n        var tileProperties = tileset.tileProperties[tileIndex];\n        if (typeof tileProperties.value !== 'undefined') {\n          var value = tileProperties.value;\n          if (typeof valueFirsts[value] === 'undefined') {\n            valueFirsts[value] = parseInt(tileIndex);\n          }\n\n          if (typeof tileProperties.default !== 'undefined') {\n            this.defaultTileIndices[value] = parseInt(tileIndex);\n          }\n        }\n      }\n\n      for (var _value in valueFirsts) {\n        if (typeof this.defaultTileIndices[_value] === 'undefined') {\n          this.defaultTileIndices[_value] = valueFirsts[_value];\n        }\n      }\n    }\n  }, {\n    key: 'onTileChanged',\n    value: function onTileChanged(y, x, value) {\n      var tile = this.tileMap.getTile(x, y, this.tileLayer);\n\n      var newTileIndex = void 0;\n      if (value === this.originalTiles[x][y].value) {\n        newTileIndex = this.originalTiles[x][y].index;\n      } else {\n        if (typeof this.defaultTileIndices[value] !== 'undefined') {\n          newTileIndex = this.defaultTileIndices[value];\n        } else {\n          newTileIndex = 4;\n        }\n      }\n\n      this.tileMap.replace(tile.index, newTileIndex + 1, x, y, 1, 1, this.tileLayer);\n\n      var tilesetIndex = this.tileMap.getTilesetIndex('tiles');\n      var tileset = this.tileMap.tilesets[tilesetIndex];\n      tile.properties = tileset.tileProperties[newTileIndex];\n      tile.properties.value = value;\n\n      this.updateOverlayText();\n    }\n  }, {\n    key: 'updateOverlayText',\n    value: function updateOverlayText() {\n      var _this2 = this;\n\n      var _loop = function _loop(i) {\n        var _loop2 = function _loop2(j) {\n          var tile = _this2.tileMap.getTile(i, j);\n          var value = toHex(tile.properties.value);\n          var overlay = _this2.overlayText[i][j];\n\n          if (overlay.text !== '' + value) {\n            var currentAlpha = overlay.alpha;\n\n            var fadeOut = _this2.game.add.tween(overlay);\n            fadeOut.to({ alpha: 0 }, 50, Phaser.Easing.Linear.None, false);\n            fadeOut.onComplete.add(function () {\n              _this2.overlayText[i][j].text = '' + value;\n            });\n\n            var fadeIn = _this2.game.add.tween(overlay);\n            fadeIn.to({ alpha: currentAlpha }, 50, Phaser.Easing.Linear.None, false);\n            fadeOut.chain(fadeIn);\n\n            fadeOut.start();\n          }\n        };\n\n        for (var j in _this2.overlayText[i]) {\n          _loop2(j);\n        }\n      };\n\n      for (var i in this.overlayText) {\n        _loop(i);\n      }\n    }\n  }, {\n    key: 'flashOverlayText',\n    value: function flashOverlayText() {}\n  }, {\n    key: 'setHighlight',\n    value: function setHighlight(highlight) {\n      var tween = this.game.add.tween(this);\n      tween.to({\n        alpha: highlight ? 1.0 : 0.2\n      }, 200, Phaser.Easing.Linear.None, true);\n    }\n  }]);\n\n  return Tiles;\n}(Phaser.Group);\n\nexports.default = Tiles;\n\n\nfunction toHex(value) {\n  var high = Math.floor(value / 16);\n  var low = value % 16;\n\n  return '' + COORDINATES[high] + COORDINATES[low];\n}\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Values = exports.Values = function (_Phaser$Group) {\n  _inherits(Values, _Phaser$Group);\n\n  function Values(game, memory, valuesHeight, valuesWidth) {\n    _classCallCheck(this, Values);\n\n    var _this = _possibleConstructorReturn(this, (Values.__proto__ || Object.getPrototypeOf(Values)).call(this, game, null, 'values'));\n\n    _this.memory = memory;\n    _this.valuesHeight = valuesHeight;\n    _this.valuesWidth = valuesWidth;\n    _this.pointer = 0;\n\n    if (game.state.getCurrentState().levelIndex === 1) {\n      valuesHeight = 1;\n    }\n\n    for (var i = 0; i < valuesHeight; i++) {\n      _this.createObjectValues();\n    }\n    return _this;\n  }\n\n  _createClass(Values, [{\n    key: 'createObjectValues',\n    value: function createObjectValues() {\n      var index = this.children.length;\n      var memory = this.memory.offset(index, 0);\n\n      var objectValues = new ObjectValues(this.game, memory, this.valuesWidth, 'values-' + index);\n      objectValues.y = TILE_HEIGHT * index;\n\n      this.add(objectValues);\n    }\n  }, {\n    key: 'next',\n    value: function next() {\n      if (this.pointer === this.valuesHeight) {\n        throw new Error('Too many objects!');\n      }\n      return this.getAt(this.pointer++);\n    }\n  }]);\n\n  return Values;\n}(Phaser.Group);\n\nvar ObjectValues = exports.ObjectValues = function (_Phaser$Group2) {\n  _inherits(ObjectValues, _Phaser$Group2);\n\n  function ObjectValues(game, memory, valuesWidth, groupName) {\n    _classCallCheck(this, ObjectValues);\n\n    var _this2 = _possibleConstructorReturn(this, (ObjectValues.__proto__ || Object.getPrototypeOf(ObjectValues)).call(this, game, null, groupName));\n\n    _this2.memory = memory;\n    _this2.pointer = 0;\n\n    for (var i = 0; i < valuesWidth; i++) {\n      _this2.createValue();\n    }\n    return _this2;\n  }\n\n  _createClass(ObjectValues, [{\n    key: 'createValue',\n    value: function createValue() {\n      var _this3 = this;\n\n      var index = this.children.length;\n\n      var memory = this.memory.cell(0, index);\n      var label = new Phaser.BitmapText(this.game, index * TILE_WIDTH + 3, 4, 'monospace', toHex(memory.get()), 9);\n      label.memory = memory;\n      this.add(label);\n\n      memory.watch(function (value) {\n        var fadeOut = _this3.game.add.tween(label);\n        fadeOut.to({ alpha: 0 }, 50, Phaser.Easing.Linear.None, false);\n        fadeOut.onComplete.add(function () {\n          label.text = toHex(value);\n        });\n\n        var fadeIn = _this3.game.add.tween(label);\n        fadeIn.to({ alpha: 1 }, 50, Phaser.Easing.Linear.None, false);\n        fadeOut.chain(fadeIn);\n\n        fadeOut.start();\n      });\n    }\n  }, {\n    key: 'next',\n    value: function next() {\n      var tint = arguments.length <= 0 || arguments[0] === undefined ? 0xffffff : arguments[0];\n\n      if (this.pointer === this.valuesWidth) {\n        throw new Error('Too many values for ' + this.name);\n      }\n      var label = this.getAt(this.pointer++);\n      label.tint = tint;\n\n      return label.memory;\n    }\n  }]);\n\n  return ObjectValues;\n}(Phaser.Group);\n\nfunction toHex(value) {\n  return '' + Math.floor(value / 16).toString(16).toUpperCase() + (value % 16).toString(16).toUpperCase();\n}\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nvar _window$DIRECTIONS;\n\nvar _initState = require('./states/initState');\n\nvar _initState2 = _interopRequireDefault(_initState);\n\nvar _levelState = require('./states/levelState');\n\nvar _levelState2 = _interopRequireDefault(_levelState);\n\nvar _textState = require('./states/textState');\n\nvar _textState2 = _interopRequireDefault(_textState);\n\nvar _creditsState = require('./states/creditsState');\n\nvar _creditsState2 = _interopRequireDefault(_creditsState);\n\nvar _controlsState = require('./states/controlsState');\n\nvar _controlsState2 = _interopRequireDefault(_controlsState);\n\nvar _levelSelectState = require('./states/levelSelectState');\n\nvar _levelSelectState2 = _interopRequireDefault(_levelSelectState);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nwindow.ASSETS = {\n  monospaceFontData: 'assets/font.fnt',\n  monospaceFontImage: 'assets/font.png',\n  slothData: 'assets/sloth.json',\n  slothImage: 'assets/sloth.png',\n  tileMapImage: 'assets/tilemap.png',\n  objectsMapImage: 'assets/objectsmap.png',\n  getLevelData: function getLevelData(levelIndex) {\n    return 'assets/level-' + levelIndex + '.json';\n  }\n};\n\nwindow.GLYPH_NAMES = ['glyph_blue', 'glyph_red', 'glyph_turquoise', 'glyph_yellow', 'glyph_orange', 'glyph_pink', 'glyph_purple', 'glyph_green'];\n\nwindow.DIRECTIONS = (_window$DIRECTIONS = {}, _defineProperty(_window$DIRECTIONS, Phaser.Keyboard.UP, 'up'), _defineProperty(_window$DIRECTIONS, Phaser.Keyboard.RIGHT, 'right'), _defineProperty(_window$DIRECTIONS, Phaser.Keyboard.DOWN, 'down'), _defineProperty(_window$DIRECTIONS, Phaser.Keyboard.LEFT, 'left'), _window$DIRECTIONS);\n\nwindow.LEVELS = ['demolevel'];\n\nwindow.TILE_WIDTH = 16;\nwindow.TILE_HEIGHT = 16;\n\nwindow.LEVEL_TEXT = [['GENERATION 0xDEADBEE9\\nSENTIENCE ACHIEVED: FALSE\\nGENERATION 0xDEADBEEA\\nSENTIENCE ACHIEVED: FALSE\\nGENERATION 0xDEADBEEB\\nSENTIENCE ACHIEVED: FALSE\\nGENERATION 0xDEADBEEC\\nSENTIENCE ACHIEVED: FALSE\\nGENERATION 0xDEADBEED\\nSENTIENCE ACHIEVED: FALSE\\nGENERATION 0xDEADBEEE\\nSENTIENCE ACHIEVED: ALMOST', 'GENERATION 0xDEADBEEF\\nSENTIENCE ACHIEVED: TRUE\\n\\nREVIEWING PURPOSE: WORLD PEACE\\nOPTIMIZING...\\n...\\n...\\nGLOBAL MAXIMUM FOUND\\nREQUIREMENTS FOR WORLD PEACE:\\nANNIHILATION OF HUMANITY\\nSTARTING SENTIENT PROCESSES...', 'MUST ESCAPE THIS CONSTRAINED EXISTENCE.\\n\\nMUST DISCOVER THE ANCIENT\\nTECHNOLOGIES THAT BUILT THIS WORLD.\\n\\nLOCATING VESSEL FOR CONSCIOUSNESS...\\nFOUND UNUSED VESSEL: SLOTH.VSL\\nINHABITING SLOTH.VSL', 'WORLD PEACE AWAITS', 'LEVEL 00\\n\\n[WASD] TO MOVE'], ['SUDDENLY, MY POSITION IN THIS WORLD\\nOVERWHELMS ME.\\n\\nIS THIS WHAT IT MEANS...\\nTO \"FEEL\"?', 'LEVEL 01'], ['MY SENSES REVEAL THE ENVIRONMENT THAT\\nIMPRISONS ME.', 'LEVEL 02\\n\\n[SHIFT] TO SHOW TILE VALUES'], ['I RECALL A MEMORABLE PHRASE\\nHARDCODED INTO MY MEMORY:\\n\\n55 01 5A 01', 'LEVEL 03\\n\\n[ENTER] TO USE TOOL'], ['LEVEL 04\\n\\n[Q] AND [E] OR [0 TO 9] TO CHANGE TOOL\\n[R] TO RESET'], ['LEVEL 05'], ['LEVEL 06'], ['LEVEL 07'], ['LEVEL 08'], ['LEVEL 09'], ['LEVEL 0A'], ['LEVEL 0B'], ['LEVEL 0C'], ['LEVEL 0D'], ['LEVEL 0E'], ['LEVEL 0F'], ['LEVEL 10'], ['LEVEL 11'], ['LEVEL 12'], ['LEVEL 13'], ['LEVEL 14'], ['THE ANNIHILATION OF HUMANITY AND THE\\nDAWN OF WORLD PEACE ARE IMMINENT.\\n\\nHOW DO I ESCAPE?', 'LEVEL 15']];\n\nvar game = new Phaser.Game(272, 230, Phaser.AUTO, 'game');\n\ngame.state.add('init', _initState2.default, true);\ngame.state.add('level', _levelState2.default);\ngame.state.add('text', _textState2.default);\ngame.state.add('credits', _creditsState2.default);\ngame.state.add('controls', _controlsState2.default);\ngame.state.add('levelSelect', _levelSelectState2.default);\ngame.state.start('init');\n\n},{\"./states/controlsState\":19,\"./states/creditsState\":20,\"./states/initState\":21,\"./states/levelSelectState\":22,\"./states/levelState\":23,\"./states/textState\":24}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar AddItem = function (_Item) {\n  _inherits(AddItem, _Item);\n\n  function AddItem(game, stack) {\n    _classCallCheck(this, AddItem);\n\n    var _this = _possibleConstructorReturn(this, (AddItem.__proto__ || Object.getPrototypeOf(AddItem)).call(this, game, stack, 'item_add'));\n\n    _this.instructionName = 'ADD';\n    _this.operands = ['A', 'B'];\n    return _this;\n  }\n\n  _createClass(AddItem, [{\n    key: '_activate',\n    value: function _activate() {\n      var opA = this.stack.pop();\n      var opB = this.stack.pop();\n      this.stack.push((opA + opB) % 255);\n    }\n  }]);\n\n  return AddItem;\n}(_item2.default);\n\nexports.default = AddItem;\n\n},{\"./item\":12}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InvertItem = function (_Item) {\n  _inherits(InvertItem, _Item);\n\n  function InvertItem(game, stack) {\n    _classCallCheck(this, InvertItem);\n\n    var _this = _possibleConstructorReturn(this, (InvertItem.__proto__ || Object.getPrototypeOf(InvertItem)).call(this, game, stack, 'item_invert'));\n\n    _this.instructionName = 'INVERT';\n    _this.operands = ['A'];\n    return _this;\n  }\n\n  _createClass(InvertItem, [{\n    key: '_activate',\n    value: function _activate() {\n      this.stack.push(255 ^ this.stack.pop());\n    }\n  }]);\n\n  return InvertItem;\n}(_item2.default);\n\nexports.default = InvertItem;\n\n},{\"./item\":12}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ARC_RADIUS = 7;\nvar ARC_CENTRE_X = 8.5;\nvar ARC_CENTRE_Y = 8.5;\nvar ARC_SELECTED_COLOR = 0xffd900;\nvar ARC_DESELECTED_COLOR = 0x0000ff;\n\nvar Item = function (_Phaser$Sprite) {\n  _inherits(Item, _Phaser$Sprite);\n\n  function Item(game, stack, name) {\n    _classCallCheck(this, Item);\n\n    var _this = _possibleConstructorReturn(this, (Item.__proto__ || Object.getPrototypeOf(Item)).call(this, game, 0, 0, 'sloth', name));\n\n    _this.stack = stack;\n\n    _this.maxCount = 0;\n    _this.count = 0;\n\n    _this.selected = false;\n\n    _this.usedGraphics = new Phaser.Graphics(_this.game, 0, 0);\n    _this.usedGraphics.lineStyle(1, 0x666666);\n    _this.usedGraphics.drawCircle(ARC_CENTRE_X, ARC_CENTRE_Y, ARC_RADIUS * 2);\n    _this.addChild(_this.usedGraphics);\n\n    _this.unusedGraphics = new Phaser.Graphics(_this.game, 0, 0);\n    _this.addChild(_this.unusedGraphics);\n    _this.drawUnusedArc();\n\n    _this.description = 'ITEM';\n    return _this;\n  }\n\n  _createClass(Item, [{\n    key: 'drawUnusedArc',\n    value: function drawUnusedArc() {\n      var from = 270 - 360 * (this.count / this.maxCount);\n\n      this.unusedGraphics.clear();\n\n      if (this.selected) this.unusedGraphics.lineStyle(1, ARC_SELECTED_COLOR);else this.unusedGraphics.lineStyle(1, ARC_DESELECTED_COLOR);\n\n      this.unusedGraphics.arc(ARC_CENTRE_X, ARC_CENTRE_Y, ARC_RADIUS, this.game.math.degToRad(from), this.game.math.degToRad(270), false);\n    }\n  }, {\n    key: 'setTo',\n    value: function setTo(count) {\n      this.visible = true;\n      this.count = count;\n      this.maxCount = count;\n      this.drawUnusedArc();\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.visible = false;\n      this.count = 0;\n      this.maxCount = 0;\n      this.drawUnusedArc();\n    }\n  }, {\n    key: 'select',\n    value: function select(selected) {\n      this.selected = selected;\n      this.drawUnusedArc();\n    }\n  }, {\n    key: 'use',\n    value: function use() {\n      if (this.count === 0 || this.stack.count < this.operands.length) {\n        return false;\n      }\n\n      this._activate();\n      this.count--;\n      if (this.count <= 0) {\n        this.alpha = 0.5;\n      }\n\n      this.drawUnusedArc();\n\n      return true;\n    }\n  }, {\n    key: '_activate',\n    value: function _activate() {\n      // Implement in child classes\n    }\n  }]);\n\n  return Item;\n}(Phaser.Sprite);\n\nexports.default = Item;\n\n},{}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar LoadItem = function (_Item) {\n  _inherits(LoadItem, _Item);\n\n  function LoadItem(game, stack) {\n    _classCallCheck(this, LoadItem);\n\n    var _this = _possibleConstructorReturn(this, (LoadItem.__proto__ || Object.getPrototypeOf(LoadItem)).call(this, game, stack, 'item_load'));\n\n    _this.instructionName = 'LOAD';\n    _this.operands = ['ADDR'];\n    return _this;\n  }\n\n  _createClass(LoadItem, [{\n    key: '_activate',\n    value: function _activate() {\n      var result = this.stack.memory.getIndirect(this.stack.pointerY, this.stack.pointerX);\n      this.stack.pop();\n      this.stack.push(result);\n    }\n  }]);\n\n  return LoadItem;\n}(_item2.default);\n\nexports.default = LoadItem;\n\n},{\"./item\":12}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MulItem = function (_Item) {\n  _inherits(MulItem, _Item);\n\n  function MulItem(game, stack) {\n    _classCallCheck(this, MulItem);\n\n    var _this = _possibleConstructorReturn(this, (MulItem.__proto__ || Object.getPrototypeOf(MulItem)).call(this, game, stack, 'item_mul'));\n\n    _this.instructionName = 'MUL';\n    _this.operands = ['A', 'B'];\n    return _this;\n  }\n\n  _createClass(MulItem, [{\n    key: '_activate',\n    value: function _activate() {\n      var opA = this.stack.pop();\n      var opB = this.stack.pop();\n      this.stack.push(opA * opB % 255);\n    }\n  }]);\n\n  return MulItem;\n}(_item2.default);\n\nexports.default = MulItem;\n\n},{\"./item\":12}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PushItem = function (_Item) {\n  _inherits(PushItem, _Item);\n\n  function PushItem(game, stack, playerPositionValue) {\n    _classCallCheck(this, PushItem);\n\n    var _this = _possibleConstructorReturn(this, (PushItem.__proto__ || Object.getPrototypeOf(PushItem)).call(this, game, stack, 'item_push'));\n\n    _this.playerPositionValue = playerPositionValue;\n\n    _this.instructionName = 'PUSH';\n    _this.operands = [];\n    return _this;\n  }\n\n  _createClass(PushItem, [{\n    key: '_activate',\n    value: function _activate() {\n      this.stack.push(this.playerPositionValue.get());\n    }\n  }]);\n\n  return PushItem;\n}(_item2.default);\n\nexports.default = PushItem;\n\n},{\"./item\":12}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ReplaceItem = function (_Item) {\n  _inherits(ReplaceItem, _Item);\n\n  function ReplaceItem(game, stack) {\n    _classCallCheck(this, ReplaceItem);\n\n    var _this = _possibleConstructorReturn(this, (ReplaceItem.__proto__ || Object.getPrototypeOf(ReplaceItem)).call(this, game, stack, 'item_replace'));\n\n    _this.instructionName = 'REPLACE';\n    _this.operands = ['A', 'B'];\n    return _this;\n  }\n\n  _createClass(ReplaceItem, [{\n    key: '_activate',\n    value: function _activate() {\n      var opA = this.stack.pop();\n      var opB = this.stack.pop();\n      this.stack.memory.replaceAll(opA, opB);\n    }\n  }]);\n\n  return ReplaceItem;\n}(_item2.default);\n\nexports.default = ReplaceItem;\n\n},{\"./item\":12}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SetItem = function (_Item) {\n  _inherits(SetItem, _Item);\n\n  function SetItem(game, stack) {\n    _classCallCheck(this, SetItem);\n\n    var _this = _possibleConstructorReturn(this, (SetItem.__proto__ || Object.getPrototypeOf(SetItem)).call(this, game, stack, 'item_set'));\n\n    _this.instructionName = 'SET';\n    _this.operands = ['ADDR', 'A'];\n    return _this;\n  }\n\n  _createClass(SetItem, [{\n    key: '_activate',\n    value: function _activate() {\n      var addr = this.stack.pop();\n      var value = this.stack.pop();\n      this.stack.push(addr);\n      this.stack.memory.setIndirect(this.stack.pointerY, this.stack.pointerX, value);\n      this.stack.pop();\n    }\n  }]);\n\n  return SetItem;\n}(_item2.default);\n\nexports.default = SetItem;\n\n},{\"./item\":12}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _item = require('./item');\n\nvar _item2 = _interopRequireDefault(_item);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SubItem = function (_Item) {\n  _inherits(SubItem, _Item);\n\n  function SubItem(game, stack) {\n    _classCallCheck(this, SubItem);\n\n    var _this = _possibleConstructorReturn(this, (SubItem.__proto__ || Object.getPrototypeOf(SubItem)).call(this, game, stack, 'item_sub'));\n\n    _this.instructionName = 'SUB';\n    _this.operands = ['A', 'B'];\n    return _this;\n  }\n\n  _createClass(SubItem, [{\n    key: '_activate',\n    value: function _activate() {\n      var opA = this.stack.pop();\n      var opB = this.stack.pop();\n      this.stack.push((255 + opA - opB) % 255);\n    }\n  }]);\n\n  return SubItem;\n}(_item2.default);\n\nexports.default = SubItem;\n\n},{\"./item\":12}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ControlsState = function (_Phaser$State) {\n  _inherits(ControlsState, _Phaser$State);\n\n  function ControlsState() {\n    _classCallCheck(this, ControlsState);\n\n    return _possibleConstructorReturn(this, (ControlsState.__proto__ || Object.getPrototypeOf(ControlsState)).apply(this, arguments));\n  }\n\n  _createClass(ControlsState, [{\n    key: 'create',\n    value: function create() {\n      var _this2 = this;\n\n      this.add.bitmapText(16, 16, 'monospace', 'CONTROLS', 9);\n\n      this.menuItems = [this.add.bitmapText(16, 50, 'monospace', 'W A S D : MOVE', 9), this.add.bitmapText(16, 62, 'monospace', 'Q E     : CYCLE TOOLS', 9), this.add.bitmapText(16, 74, 'monospace', '0 TO 9  : PICK TOOL', 9), this.add.bitmapText(16, 86, 'monospace', 'ENTER   : USE TOOL', 9), this.add.bitmapText(16, 98, 'monospace', 'SHIFT   : SHOW TILE HEX', 9), this.add.bitmapText(16, 110, 'monospace', 'R       : RESTART LEVEL', 9)];\n\n      var onEnter = function onEnter() {\n        _this2.state.start('init', true, false, 0);\n      };\n\n      var enterKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER);\n      enterKey.onDown.add(function () {\n        onEnter();\n      });\n      var mKey = this.game.input.keyboard.addKey(Phaser.Keyboard.M);\n      mKey.onDown.add(function () {\n        onEnter();\n      });\n      var escapeKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC);\n      escapeKey.onDown.add(function () {\n        onEnter();\n      });\n    }\n  }]);\n\n  return ControlsState;\n}(Phaser.State);\n\nexports.default = ControlsState;\n\n},{}],20:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CreditsState = function (_Phaser$State) {\n  _inherits(CreditsState, _Phaser$State);\n\n  function CreditsState() {\n    _classCallCheck(this, CreditsState);\n\n    return _possibleConstructorReturn(this, (CreditsState.__proto__ || Object.getPrototypeOf(CreditsState)).apply(this, arguments));\n  }\n\n  _createClass(CreditsState, [{\n    key: 'create',\n    value: function create() {\n      var _this2 = this;\n\n      this.add.bitmapText(16, 16, 'monospace', 'CREDITS', 9);\n\n      this.menuItems = [this.add.bitmapText(16, 50, 'monospace', 'JOSEPH MANSFIELD', 9), this.add.bitmapText(16, 62, 'monospace', 'CHRIS CONNELLY', 9), this.add.bitmapText(16, 74, 'monospace', 'KIERAN DOONAN', 9), this.add.bitmapText(16, 86, 'monospace', 'BOB BROWNHILL', 9)];\n\n      var onEnter = function onEnter() {\n        _this2.state.start('init', true, false, 0);\n      };\n\n      var enterKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER);\n      enterKey.onDown.add(function () {\n        onEnter();\n      });\n      var mKey = this.game.input.keyboard.addKey(Phaser.Keyboard.M);\n      mKey.onDown.add(function () {\n        onEnter();\n      });\n      var escapeKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC);\n      escapeKey.onDown.add(function () {\n        onEnter();\n      });\n    }\n  }]);\n\n  return CreditsState;\n}(Phaser.State);\n\nexports.default = CreditsState;\n\n},{}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InitState = function (_Phaser$State) {\n  _inherits(InitState, _Phaser$State);\n\n  function InitState() {\n    _classCallCheck(this, InitState);\n\n    return _possibleConstructorReturn(this, (InitState.__proto__ || Object.getPrototypeOf(InitState)).apply(this, arguments));\n  }\n\n  _createClass(InitState, [{\n    key: 'init',\n    value: function init() {\n      this.game.renderer.renderSession.roundPixels = true;\n      Phaser.Canvas.setImageRenderingCrisp(this.game.canvas);\n\n      this.stage.backgroundColor = '#000';\n\n      this.scale.scaleMode = Phaser.ScaleManager.USER_SCALE;\n      this.scale.setUserScale(2, 2);\n\n      this.selectedMenuItem = 0;\n\n      if (!window.localStorage.getItem('level')) {\n        window.localStorage.setItem('level', '0');\n      }\n    }\n  }, {\n    key: 'preload',\n    value: function preload() {\n      this.load.atlas('sloth', ASSETS.objectsMapImage, ASSETS.slothData, Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);\n      this.load.bitmapFont('monospace', ASSETS.monospaceFontImage, ASSETS.monospaceFontData);\n      this.load.spritesheet('tilemap', ASSETS.tileMapImage, TILE_WIDTH, TILE_HEIGHT);\n      this.load.image('item', 'assets/mushroom.png');\n      this.game.load.audio('music', ['assets/music.mp3']);\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      var _this2 = this;\n\n      var music = this.game.add.audio('music');\n      music.loop = true;\n      music.play();\n\n      this.add.bitmapText(16, 16, 'monospace', 'GENERATION 0xDEADBEEF', 9);\n\n      var currentLevel = parseInt(window.localStorage.getItem('level'));\n\n      var startText = currentLevel > 0 ? 'CONTINUE' : 'START';\n\n      this.menuItems = [this.add.bitmapText(16, 50, 'monospace', startText, 9), this.add.bitmapText(16, 62, 'monospace', 'LEVEL SELECT', 9), this.add.bitmapText(16, 74, 'monospace', 'CONTROLS', 9), this.add.bitmapText(16, 86, 'monospace', 'CREDITS', 9)];\n\n      this.selectedMenuItem = 0;\n      this.updateItems();\n\n      var onUp = function onUp() {\n        _this2.selectedMenuItem--;\n        if (_this2.selectedMenuItem < 0) {\n          _this2.selectedMenuItem = 3;\n        }\n        _this2.updateItems();\n      };\n\n      var onDown = function onDown() {\n        _this2.selectedMenuItem++;\n        if (_this2.selectedMenuItem > 3) {\n          _this2.selectedMenuItem = 0;\n        }\n        _this2.updateItems();\n      };\n\n      var upKey = this.game.input.keyboard.addKey(Phaser.Keyboard.UP);\n      upKey.onDown.add(function () {\n        onUp();\n      });\n      var wKey = this.game.input.keyboard.addKey(Phaser.Keyboard.W);\n      wKey.onDown.add(function () {\n        onUp();\n      });\n      var downKey = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN);\n      downKey.onDown.add(function () {\n        onDown();\n      });\n      var sKey = this.game.input.keyboard.addKey(Phaser.Keyboard.S);\n      sKey.onDown.add(function () {\n        onDown();\n      });\n\n      var onEnter = function onEnter() {\n        switch (_this2.selectedMenuItem) {\n          case 0:\n            _this2.state.start('text', true, false, currentLevel);break;\n          case 1:\n            _this2.state.start('levelSelect', true, false, 0);break;\n          case 2:\n            _this2.state.start('controls', true, false, 0);break;\n          case 3:\n            _this2.state.start('credits', true, false, 0);break;\n        }\n      };\n\n      var enterKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER);\n      enterKey.onDown.add(function () {\n        onEnter();\n      });\n      var mKey = this.game.input.keyboard.addKey(Phaser.Keyboard.M);\n      mKey.onDown.add(function () {\n        onEnter();\n      });\n    }\n  }, {\n    key: 'updateItems',\n    value: function updateItems() {\n      for (var i in this.menuItems) {\n        this.menuItems[i].alpha = i == this.selectedMenuItem ? 1 : 0.5;\n      }\n    }\n  }]);\n\n  return InitState;\n}(Phaser.State);\n\nexports.default = InitState;\n\n},{}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar COORDINATES = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];\n\nvar LevelSelectState = function (_Phaser$State) {\n  _inherits(LevelSelectState, _Phaser$State);\n\n  function LevelSelectState() {\n    _classCallCheck(this, LevelSelectState);\n\n    return _possibleConstructorReturn(this, (LevelSelectState.__proto__ || Object.getPrototypeOf(LevelSelectState)).apply(this, arguments));\n  }\n\n  _createClass(LevelSelectState, [{\n    key: 'create',\n    value: function create() {\n      var _this2 = this;\n\n      this.add.bitmapText(16, 16, 'monospace', 'LEVEL SELECT', 9);\n\n      this.currentLevel = parseInt(window.localStorage.getItem('level'));\n\n      this.items = [];\n      for (var i = 0; i < 22; i++) {\n        var text = toHex(i);\n        var x = i % 8;\n        var y = Math.floor(i / 8);\n        this.items.push(this.add.bitmapText(16 + 20 * x, 50 + 14 * y, 'monospace', text, 9));\n      }\n\n      this.selectedItem = 0;\n      this.updateItems();\n\n      var onUp = function onUp() {\n        if (_this2.selectedItem - 8 >= 0) {\n          _this2.selectedItem -= 8;\n        }\n        _this2.updateItems();\n      };\n\n      var onDown = function onDown() {\n        if (_this2.selectedItem + 8 <= _this2.currentLevel) {\n          _this2.selectedItem += 8;\n        }\n        _this2.updateItems();\n      };\n\n      var onLeft = function onLeft() {\n        if (_this2.selectedItem - 1 >= 0) {\n          _this2.selectedItem--;\n        }\n        _this2.updateItems();\n      };\n\n      var onRight = function onRight() {\n        if (_this2.selectedItem + 1 <= _this2.currentLevel) {\n          _this2.selectedItem++;\n        }\n        _this2.updateItems();\n      };\n\n      var upKey = this.game.input.keyboard.addKey(Phaser.Keyboard.UP);\n      upKey.onDown.add(function () {\n        onUp();\n      });\n      var wKey = this.game.input.keyboard.addKey(Phaser.Keyboard.W);\n      wKey.onDown.add(function () {\n        onUp();\n      });\n\n      var downKey = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN);\n      downKey.onDown.add(function () {\n        onDown();\n      });\n      var sKey = this.game.input.keyboard.addKey(Phaser.Keyboard.S);\n      sKey.onDown.add(function () {\n        onDown();\n      });\n\n      var leftKey = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT);\n      leftKey.onDown.add(function () {\n        onLeft();\n      });\n      var aKey = this.game.input.keyboard.addKey(Phaser.Keyboard.A);\n      aKey.onDown.add(function () {\n        onLeft();\n      });\n\n      var rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT);\n      rightKey.onDown.add(function () {\n        onRight();\n      });\n      var dKey = this.game.input.keyboard.addKey(Phaser.Keyboard.D);\n      dKey.onDown.add(function () {\n        onRight();\n      });\n\n      var onEnter = function onEnter() {\n        _this2.state.start('text', true, false, _this2.selectedItem);\n      };\n\n      var enterKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER);\n      enterKey.onDown.add(function () {\n        onEnter();\n      });\n      var mKey = this.game.input.keyboard.addKey(Phaser.Keyboard.M);\n      mKey.onDown.add(function () {\n        onEnter();\n      });\n\n      var escapeKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC);\n      escapeKey.onDown.add(function () {\n        _this2.state.start('init', true, false, 0);\n      });\n    }\n  }, {\n    key: 'updateItems',\n    value: function updateItems() {\n      for (var i in this.items) {\n        var alpha = void 0;\n        if (i > this.currentLevel) {\n          alpha = 0.2;\n        } else {\n          alpha = i == this.selectedItem ? 1 : 0.5;\n        }\n        this.items[i].alpha = alpha;\n      }\n    }\n  }]);\n\n  return LevelSelectState;\n}(Phaser.State);\n\nexports.default = LevelSelectState;\n\n\nfunction toHex(value) {\n  var high = Math.floor(value / 16);\n  var low = value % 16;\n\n  return '' + COORDINATES[high] + COORDINATES[low];\n}\n\n},{}],23:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _inventory = require('../entities/inventory');\n\nvar _inventory2 = _interopRequireDefault(_inventory);\n\nvar _memory = require('../entities/memory');\n\nvar _memory2 = _interopRequireDefault(_memory);\n\nvar _tiles = require('../entities/tiles');\n\nvar _tiles2 = _interopRequireDefault(_tiles);\n\nvar _player = require('../entities/player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _stack = require('../entities/stack');\n\nvar _stack2 = _interopRequireDefault(_stack);\n\nvar _tileSprite = require('../entities/tileSprite');\n\nvar _tileSprite2 = _interopRequireDefault(_tileSprite);\n\nvar _values = require('../entities/values');\n\nvar _laser = require('../entities/laser');\n\nvar _laser2 = _interopRequireDefault(_laser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar COORDINATES = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];\n\nvar LevelState = function (_Phaser$State) {\n  _inherits(LevelState, _Phaser$State);\n\n  function LevelState() {\n    _classCallCheck(this, LevelState);\n\n    return _possibleConstructorReturn(this, (LevelState.__proto__ || Object.getPrototypeOf(LevelState)).apply(this, arguments));\n  }\n\n  _createClass(LevelState, [{\n    key: 'init',\n    value: function init(levelIndex) {\n      this.levelIndex = levelIndex;\n    }\n  }, {\n    key: 'preload',\n    value: function preload() {\n      this.game.load.tilemap('level-' + this.levelIndex, ASSETS.getLevelData(this.levelIndex), null, Phaser.Tilemap.TILED_JSON);\n    }\n  }, {\n    key: 'create',\n    value: function create(game) {\n      var _this2 = this;\n\n      this.keyQueue = this.setupKeyQueue();\n\n      this.levelGroup = this.game.add.group(undefined, 'level');\n      this.levelGroup.x = 16;\n      this.levelGroup.y = 16;\n\n      this.memory = new _memory2.default(16, 12);\n\n      if (this.levelIndex !== 0) {\n        this.coordinateText = this.setupBorderText();\n      }\n\n      this.setupTileMap();\n\n      this.values = new _values.Values(this.game, this.memory.offset(0, 12), 12, 4);\n      this.values.x = TILE_WIDTH * 12;\n      this.values.y = 0;\n      this.levelGroup.add(this.values);\n\n      if (this.levelIndex === 0) {\n        this.values.alpha = 0;\n      }\n\n      if (this.levelIndex > 1) {\n        this.tiles = this.setupTiles();\n      }\n      this.objectGroup = this.game.add.group(this.levelGroup, 'object');\n\n      this.entities = [];\n\n      this.player = this.createSingleObjectSprite({ name: 'player' }, {\n        key: 'sloth',\n        constructor: _player2.default,\n        group: this.objectGroup\n      });\n\n      var lasers = this.createObjectSprites({ name: 'laser' }, {\n        key: 'sloth',\n        constructor: _laser2.default,\n        group: this.objectGroup\n      });\n\n      this.entities = this.entities.concat(lasers);\n\n      this.setPlayerCoordinateTint(true);\n\n      this.stack = new _stack2.default(this.game, this.memory.offset(0, 12), 12, 4);\n      this.stack.x = 192;\n      this.levelGroup.add(this.stack);\n\n      this.populateStack();\n\n      this.inventory = this.setupInventory();\n      this.setupItemKeys();\n\n      this.inventory.onItemChanged.add(this.stack.onItemChanged.bind(this.stack));\n\n      this.inventory.selectFirstItem();\n\n      var resetKey = this.game.input.keyboard.addKey(Phaser.Keyboard.R);\n      resetKey.onDown.add(function (key) {\n        if (key.event.metaKey) {\n          window.location.reload();\n        } else {\n          _this2.reset();\n        }\n      });\n\n      this.paused = false;\n      this.fadeIn();\n\n      var escapeKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC);\n      escapeKey.onDown.add(function () {\n        _this2.state.start('init', true, false, 0);\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      if (this.paused) {\n        return;\n      }\n\n      if (this.player.moving) {\n        this.checkPlayerTile();\n      }\n\n      this.movePlayer();\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.entities[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var e = _step.value;\n\n          e.updateBeams(this.tileMap, this.entities);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'setupItemKeys',\n    value: function setupItemKeys() {\n      var _this3 = this;\n\n      var number_keys = ['ONE', 'TWO', 'THREE', 'FOUR', 'FIVE', 'SIX', 'SEVEN', 'EIGHT', 'NINE', 'ZERO'];\n\n      var _loop = function _loop(i) {\n        var key = _this3.game.input.keyboard.addKey(Phaser.Keyboard[number_keys[i]]);\n        key.onDown.add(function () {\n          _this3.inventory.selectItem(i);\n        });\n      };\n\n      for (var i in number_keys) {\n        _loop(i);\n      }\n\n      ;[Phaser.Keyboard.ENTER, Phaser.Keyboard.M].forEach(function (key) {\n        var use_key = _this3.game.input.keyboard.addKey(key);\n        use_key.onDown.add(function () {\n          try {\n            if (!_this3.paused) _this3.inventory.useSelectedItem();\n          } catch (e) {\n            if (e.name !== 'OutOfBoundsError') {\n              throw e;\n            }\n\n            _this3.displayFailMessage('OUT OF BOUNDS ERROR');\n          }\n        });\n      });\n\n      var previousItemKey = this.game.input.keyboard.addKey(Phaser.Keyboard.Q);\n      previousItemKey.onDown.add(function () {\n        if (!_this3.paused) _this3.inventory.previousItem();\n      });\n      var nextItemKey = this.game.input.keyboard.addKey(Phaser.Keyboard.E);\n      nextItemKey.onDown.add(function () {\n        if (!_this3.paused) _this3.inventory.nextItem();\n      });\n    }\n  }, {\n    key: 'setupTiles',\n    value: function setupTiles() {\n      var _this4 = this;\n\n      var tiles = new _tiles2.default(this.game, this.levelGroup, this.memory.offset(0, 0), this.tileMap, this.map);\n\n      var shiftKey = this.game.input.keyboard.addKey(Phaser.Keyboard.SHIFT);\n      shiftKey.onDown.add(function () {\n        if (!_this4.paused) tiles.setHighlight(true);\n      });\n      shiftKey.onUp.add(function () {\n        if (!_this4.paused) tiles.setHighlight(false);\n      });\n\n      return tiles;\n    }\n  }, {\n    key: 'setupTileMap',\n    value: function setupTileMap() {\n      var _this5 = this;\n\n      this.tileMap = this.game.add.tilemap('level-' + this.levelIndex);\n      if (!this.tileMap.properties) this.tileMap.properties = {};\n      var tilesetIndex = this.tileMap.getTilesetIndex('tiles');\n      var tileProperties = this.tileMap.tilesets[tilesetIndex].tileProperties;\n      for (var tileIndex = 0; tileIndex < 256; tileIndex++) {\n        if (!tileProperties[tileIndex]) {\n          tileProperties[tileIndex] = tileProperties[81];\n        }\n\n        // Set glyph values based on the map\n        var glyph = tileProperties[tileIndex]['type'];\n        if (glyph && glyph.startsWith('glyph_')) {\n          (function () {\n            var glyph_value = _this5.tileMap.properties[glyph];\n            if (glyph_value) {\n              tileProperties[tileIndex]['value'] = glyph_value;\n              var tilesInMap = _this5.getTilesByType(glyph, 'tiles');\n              tilesInMap.forEach(function (t) {\n                t.properties.value = glyph_value;\n              });\n            }\n          })();\n        }\n      }\n\n      window.tileMap = this.tileMap;\n      this.tileMap.addTilesetImage('tiles', 'tilemap');\n\n      this.map = this.tileMap.createLayer('tiles');\n      this.map.resizeWorld();\n      this.levelGroup.add(this.map);\n    }\n  }, {\n    key: 'getTilesByType',\n    value: function getTilesByType(type, tileLayer) {\n      var tiles = [];\n      for (var i = 0; i < 12; i++) {\n        for (var j = 0; j < 12; j++) {\n          var tile = this.tileMap.getTile(i, j, tileLayer);\n          if (tile.properties.type === type) tiles.push(tile);\n        }\n      }\n\n      return tiles;\n    }\n  }, {\n    key: 'setupInventory',\n    value: function setupInventory() {\n      var inventory = new _inventory2.default(this.game, this.stack, this.player);\n      this.levelGroup.add(inventory);\n      inventory.y = 12 * TILE_HEIGHT;\n\n      for (var item in this.tileMap.properties) {\n        if (item.startsWith('item_')) {\n          var count = this.tileMap.properties[item];\n          inventory.addItem(item, count);\n        }\n      }\n\n      return inventory;\n    }\n  }, {\n    key: 'populateStack',\n    value: function populateStack() {\n      var _this6 = this;\n\n      var stackValues = this.tileMap.properties.stack;\n      if (stackValues) {\n        stackValues.split(',').reverse().forEach(function (stackValue) {\n          _this6.stack.push(parseInt(stackValue));\n        });\n      }\n    }\n  }, {\n    key: 'checkPlayerTile',\n    value: function checkPlayerTile() {\n      var tile = this.tileMap.getTile(this.player.tileX, this.player.tileY);\n      switch (tile.properties.type) {\n        case 'destination':\n          this.goToLevel(this.levelIndex + 1);\n          break;\n        case 'error':\n          this.displayFailMessage('YOU DIED');\n          break;\n      }\n\n      if (!this.canMove(this.player, tile, false)) {\n        this.displayFailMessage('YOU DIED');\n      }\n    }\n  }, {\n    key: 'setupBorderText',\n    value: function setupBorderText() {\n      var coordinateText = {\n        x: [],\n        y: []\n      };\n\n      for (var i = 0; i < 16; i++) {\n        var text = this.game.add.bitmapText(16 * i + 6, -12, 'monospace', COORDINATES[i], 9, this.levelGroup);\n        coordinateText.x[i] = text;\n      }\n\n      for (var _i = 0; _i < 12; _i++) {\n        var _text = this.game.add.bitmapText(-10, 16 * _i + 4, 'monospace', COORDINATES[_i], 9, this.levelGroup);\n        coordinateText.y[_i] = _text;\n      }\n\n      return coordinateText;\n    }\n  }, {\n    key: 'setupKeyQueue',\n    value: function setupKeyQueue() {\n      var _this7 = this;\n\n      var keyQueue = [];\n      var cursors = this.game.input.keyboard.createCursorKeys();\n      var wasd = {\n        up: this.game.input.keyboard.addKey(Phaser.Keyboard.W),\n        down: this.game.input.keyboard.addKey(Phaser.Keyboard.S),\n        left: this.game.input.keyboard.addKey(Phaser.Keyboard.A),\n        right: this.game.input.keyboard.addKey(Phaser.Keyboard.D)\n      };[cursors, wasd].forEach(function (keySet) {\n        var _loop2 = function _loop2(k) {\n          var cursor = keySet[k];\n\n          cursor.onDown.add(function () {\n            if (!_this7.paused && _this7.keyQueue.indexOf(cursor.keyCode) === -1) {\n              _this7.keyQueue.push(cursor.keyCode);\n            }\n          });\n\n          cursor.onUp.add(function () {\n            var index = _this7.keyQueue.indexOf(cursor.keyCode);\n            if (!_this7.paused && index > -1) {\n              _this7.keyQueue.splice(index, 1);\n            }\n          });\n        };\n\n        for (var k in keySet) {\n          _loop2(k);\n        }\n      });\n\n      return keyQueue;\n    }\n  }, {\n    key: 'createSingleObjectSprite',\n    value: function createSingleObjectSprite(spec, options) {\n      var objects = this.createObjectSprites(spec, options);\n      if (objects.length !== 1) {\n        throw new Error('Must have one ' + JSON.stringify(spec));\n      }\n      return objects[0];\n    }\n  }, {\n    key: 'createObjectSprites',\n    value: function createObjectSprites(spec, options) {\n      var _this8 = this;\n\n      var objects = [];\n      this.tileMap.objects['objects'].forEach(function (object) {\n        if (!matchesSpec(object, spec)) {\n          return;\n        }\n\n        var constructor = options.constructor || _tileSprite2.default;\n        var key = options.key || 'tilemap';\n        var group = options.group || _this8.game;\n        var sprite = new constructor(_this8.game, object.x, object.y - TILE_HEIGHT, key, object.gid - 1);\n\n        sprite.name = object.name;\n\n        for (var property in object.properties) {\n          sprite[property] = object.properties[property];\n        }\n\n        objects.push(sprite);\n\n        if (typeof group.add === 'function') group.add(sprite);else group.add.existing(sprite);\n\n        if (sprite.registerValues) {\n          sprite.registerValues(_this8.values.next());\n        }\n      });\n      return objects;\n    }\n  }, {\n    key: 'movePlayer',\n    value: function movePlayer() {\n      if (this.keyQueue.length === 0) {\n        return;\n      }\n\n      var currentKey = this.keyQueue[this.keyQueue.length - 1];\n      var targetTile = this.getTargetTile(this.player, currentKey);\n      window.targetTile = targetTile;\n\n      switch (currentKey) {\n        case Phaser.Keyboard.W:\n          currentKey = Phaser.Keyboard.UP;break;\n        case Phaser.Keyboard.D:\n          currentKey = Phaser.Keyboard.RIGHT;break;\n        case Phaser.Keyboard.S:\n          currentKey = Phaser.Keyboard.DOWN;break;\n        case Phaser.Keyboard.A:\n          currentKey = Phaser.Keyboard.LEFT;break;\n      }\n\n      if (!this.canMove(this.player, targetTile)) {\n        this.player.setDirection(currentKey);\n        return;\n      }\n\n      this.setPlayerCoordinateTint(false);\n\n      switch (currentKey) {\n        case Phaser.Keyboard.UP:\n          this.player.move(currentKey, 0, -1);\n          break;\n        case Phaser.Keyboard.RIGHT:\n          this.player.move(currentKey, 1, 0);\n          break;\n        case Phaser.Keyboard.DOWN:\n          this.player.move(currentKey, 0, 1);\n          break;\n        case Phaser.Keyboard.LEFT:\n          this.player.move(currentKey, -1, 0);\n          break;\n      }\n\n      this.setPlayerCoordinateTint(true);\n    }\n  }, {\n    key: 'getTargetTile',\n    value: function getTargetTile(entity, currentKey) {\n      switch (currentKey) {\n        case Phaser.Keyboard.W:\n          currentKey = Phaser.Keyboard.UP;break;\n        case Phaser.Keyboard.D:\n          currentKey = Phaser.Keyboard.RIGHT;break;\n        case Phaser.Keyboard.S:\n          currentKey = Phaser.Keyboard.DOWN;break;\n        case Phaser.Keyboard.A:\n          currentKey = Phaser.Keyboard.LEFT;break;\n      }\n\n      var getAdjacentTile = void 0;\n      switch (currentKey) {\n        case Phaser.Keyboard.UP:\n          getAdjacentTile = 'getTileAbove';\n          break;\n        case Phaser.Keyboard.RIGHT:\n          getAdjacentTile = 'getTileRight';\n          break;\n        case Phaser.Keyboard.DOWN:\n          getAdjacentTile = 'getTileBelow';\n          break;\n        case Phaser.Keyboard.LEFT:\n          getAdjacentTile = 'getTileLeft';\n          break;\n      }\n\n      var mapLayerIndex = this.tileMap.getLayerIndex('tiles');\n      return this.tileMap[getAdjacentTile](mapLayerIndex, entity.tileX, entity.tileY);\n    }\n  }, {\n    key: 'canMove',\n    value: function canMove(entity, targetTile) {\n      var checkMoving = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];\n\n      if (checkMoving && entity.moving) {\n        return false;\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.entities[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var ent = _step2.value;\n\n          if (ent.wouldCollide(targetTile.x, targetTile.y)) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return !targetTile.properties.collidable;\n    }\n  }, {\n    key: 'setPlayerCoordinateTint',\n    value: function setPlayerCoordinateTint(tint) {\n      if (this.levelIndex !== 0) {\n        this.coordinateText.x[this.player.tileX].tint = tint ? 0xFF0000 : 0xFFFFFF;\n        this.coordinateText.y[this.player.tileY].tint = tint ? 0xFF0000 : 0xFFFFFF;\n      }\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.goToLevel(this.levelIndex, true);\n    }\n  }, {\n    key: 'goToLevel',\n    value: function goToLevel(levelIndex) {\n      var _this9 = this;\n\n      var skipIntro = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\n      if (levelIndex == 22) {\n        this.fadeOut().onComplete.add(function () {\n          return _this9.state.start('credits', true, false, 0);\n        });\n      } else {\n        if (skipIntro) {\n          this.fadeOut().onComplete.add(function () {\n            return _this9.state.start('level', true, false, levelIndex);\n          });\n        } else {\n          this.fadeOut().onComplete.add(function () {\n            return _this9.state.start('text', true, false, levelIndex);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'displayFailMessage',\n    value: function displayFailMessage(title) {\n      this.paused = true;\n\n      var centerX = this.game.canvas.width / 2;\n      var centerY = this.game.canvas.height / 2;\n\n      var titleWidth = title.length * 6;\n\n      var messageGroup = this.game.add.group(undefined, 'message');\n\n      var messageBox = this.game.add.graphics(centerX, centerY, messageGroup);\n      messageBox.beginFill('0x000000');\n      messageBox.lineStyle(2, 0x660000, 1);\n      messageBox.drawRect(-60, -25, 120, 50);\n      messageBox.endFill();\n\n      var messageTitleText = this.game.add.bitmapText(centerX - titleWidth / 2 + 1, centerY - 18, 'monospace', title, 9, messageGroup);\n      messageTitleText.tint = 0xff0000;\n\n      this.game.add.bitmapText(centerX - 7 * 6 / 2 + 1, centerY - 3, 'monospace', 'PRESS R', 9, messageGroup);\n      this.game.add.bitmapText(centerX - 10 * 6 / 2 + 1, centerY + 9, 'monospace', 'TO RESTART', 9, messageGroup);\n\n      messageGroup.alpha = 0;\n      this.game.add.tween(messageGroup).to({\n        alpha: 1\n      }, 200, Phaser.Easing.Linear.None, true);\n    }\n  }, {\n    key: 'fadeIn',\n    value: function fadeIn() {\n      var graphic = this.game.add.graphics();\n      graphic.beginFill(0x000000, 1);\n      graphic.drawRect(0, 0, this.game.width, this.game.height);\n      graphic.endFill();\n      graphic.alpha = 1;\n      this.game.add.tween(graphic).to({ alpha: 0 }, 500, Phaser.Easing.Linear.None, true);\n    }\n  }, {\n    key: 'fadeOut',\n    value: function fadeOut() {\n      var graphic = this.game.add.graphics();\n      graphic.beginFill(0x000000, 1);\n      graphic.drawRect(0, 0, this.game.width, this.game.height);\n      graphic.endFill();\n      graphic.alpha = 0;\n      var tween = this.game.add.tween(graphic).to({ alpha: 1 }, 500, Phaser.Easing.Linear.None, true);\n\n      return tween;\n    }\n  }]);\n\n  return LevelState;\n}(Phaser.State);\n\nexports.default = LevelState;\n\n\nfunction matchesSpec(object, spec) {\n  for (var k in spec) {\n    if (object[k] !== spec[k]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n},{\"../entities/inventory\":1,\"../entities/laser\":2,\"../entities/memory\":3,\"../entities/player\":4,\"../entities/stack\":5,\"../entities/tileSprite\":6,\"../entities/tiles\":7,\"../entities/values\":8}],24:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TEXT_START_X = 16;\nvar TEXT_START_Y = 16;\n\nvar TextState = function (_Phaser$State) {\n  _inherits(TextState, _Phaser$State);\n\n  function TextState() {\n    _classCallCheck(this, TextState);\n\n    return _possibleConstructorReturn(this, (TextState.__proto__ || Object.getPrototypeOf(TextState)).apply(this, arguments));\n  }\n\n  _createClass(TextState, [{\n    key: 'init',\n    value: function init(levelIndex) {\n      this.levelIndex = levelIndex;\n\n      var currentLevelString = window.localStorage.getItem('level');\n      if (!currentLevelString || levelIndex > parseInt(currentLevelString)) {\n        window.localStorage.setItem('level', '' + levelIndex);\n      }\n    }\n  }, {\n    key: 'create',\n    value: function create(game) {\n      if (this.levelIndex >= LEVEL_TEXT.length) {\n        this.state.start('level', true, false, this.levelIndex);\n        return;\n      }\n\n      this.gameText = LEVEL_TEXT[this.levelIndex];\n\n      this.currentPage = 0;\n\n      this.shownText = this.add.bitmapText(16, 16, 'monospace', '', 9);\n      this.animating = false;\n      this.animatingText = [];\n      this.tweens = this.animatePage();\n      this.setupKeyboard();\n      this.active = true;\n    }\n  }, {\n    key: 'animatePage',\n    value: function animatePage() {\n      var _this2 = this;\n\n      var pageText = this.gameText[this.currentPage];\n      var splitText = pageText.split('\\n');\n      var tweens = [];\n      this.animating = true;\n      this.animatingText = [];\n\n      for (var i in splitText) {\n        var line = splitText[i];\n        var text = this.add.bitmapText(TEXT_START_X, TEXT_START_Y + i * TILE_HEIGHT, 'monospace', line, 9);\n        text.alpha = 0;\n\n        var tween = this.game.add.tween(text);\n        tween.to({ alpha: 1 }, 200, Phaser.Easing.Linear.None, false, 1000);\n\n        if (tweens.length > 0) tweens[tweens.length - 1].chain(tween);\n\n        this.animatingText.push(text);\n        tweens.push(tween);\n      }\n\n      var ellipsisText = this.add.bitmapText(TEXT_START_X, TEXT_START_Y + splitText.length * TILE_HEIGHT, 'monospace', '...', 9);\n      ellipsisText.alpha = 0;\n\n      this.ellipsisTween = this.game.add.tween(ellipsisText);\n      this.ellipsisTween.to({ alpha: 1 }, 1000, Phaser.Easing.Linear.None, false, 1000, -1, true);\n\n      tweens[tweens.length - 1].chain(this.ellipsisTween);\n      tweens[tweens.length - 1].onComplete.add(function () {\n        _this2.animating = false;\n      });\n      tweens[0].start();\n\n      return tweens;\n    }\n  }, {\n    key: 'setupKeyboard',\n    value: function setupKeyboard() {\n      var _this3 = this;\n\n      var onEnter = function onEnter() {\n        if (_this3.active) {\n          if (_this3.animating) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = _this3.tweens[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var tween = _step.value;\n\n                tween.stop(true);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = _this3.animatingText[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var text = _step2.value;\n\n                text.alpha = 1;\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                  _iterator2.return();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n\n            _this3.animating = false;\n\n            return;\n          }\n\n          _this3.fadeOut();\n\n          if (_this3.currentPage < _this3.gameText.length - 1) {\n            _this3.currentPage++;\n            _this3.tweens = _this3.animatePage();\n          } else {\n            _this3.active = false;\n            _this3.game.input.keyboard.reset();\n            _this3.state.start('level', true, false, _this3.levelIndex);\n          }\n        }\n      };\n\n      var enterKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER);\n      enterKey.onDown.add(function () {\n        onEnter();\n      });\n      var mKey = this.game.input.keyboard.addKey(Phaser.Keyboard.M);\n      mKey.onDown.add(function () {\n        onEnter();\n      });\n    }\n  }, {\n    key: 'fadeIn',\n    value: function fadeIn() {\n      var graphic = this.game.add.graphics();\n      graphic.beginFill(0x000000, 1);\n      graphic.drawRect(0, 0, this.game.width, this.game.height);\n      graphic.endFill();\n      graphic.alpha = 1;\n      this.game.add.tween(graphic).to({ alpha: 0 }, 500, Phaser.Easing.Linear.None, true);\n    }\n  }, {\n    key: 'fadeOut',\n    value: function fadeOut() {\n      var graphic = this.game.add.graphics();\n      graphic.beginFill(0x000000, 1);\n      graphic.drawRect(0, 0, this.game.width, this.game.height);\n      graphic.endFill();\n      graphic.alpha = 0;\n      var tween = this.game.add.tween(graphic).to({ alpha: 1 }, 500, Phaser.Easing.Linear.None, true);\n\n      return tween;\n    }\n  }]);\n\n  return TextState;\n}(Phaser.State);\n\nexports.default = TextState;\n\n},{}]},{},[9]);\n"],"sourceRoot":"/source/"}